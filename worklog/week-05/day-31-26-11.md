# Worklog - NgÃ y 26/11/2025

## ğŸ“… ThÃ´ng tin cÆ¡ báº£n
- **NgÃ y**: 26/11/2025
- **Thá»©**: Thá»© TÆ°
- **Tuáº§n thá»±c táº­p**: 5/8
- **Thá»i gian lÃ m viá»‡c**: 18:00 - 22:00 (4 tiáº¿ng)
- **Mood**: ğŸ˜Š Ráº¥t há»©ng thÃº khi báº¯t Ä‘áº§u lÃ m viá»‡c vá»›i Back-end, giai Ä‘oáº¡n má»›i cá»§a dá»± Ã¡n.

## ğŸ¯ Má»¥c tiÃªu ngÃ y hÃ´m nay
- [x] Triá»ƒn khai cÆ¡ sá»Ÿ dá»¯ liá»‡u PostgreSQL cho Page Service trÃªn mÃ´i trÆ°á»ng local (Docker).
- [x] Thiáº¿t láº­p Spring Data JPA vÃ  táº¡o cÃ¡c Entity classes cho Page Service (<code>Page</code>, <code>Section</code>, <code>Banner</code>, <code>PageSetting</code>).
- [x] Cáº¥u hÃ¬nh database connection trong `application.properties` vÃ  kiá»ƒm tra káº¿t ná»‘i.

## ğŸ’¼ CÃ´ng viá»‡c Ä‘Ã£ thá»±c hiá»‡n

### 1. Triá»ƒn khai PostgreSQL cho Page Service (Docker) â±ï¸ 1 tiáº¿ng
- **MÃ´ táº£**:
    - Táº¡o file `docker-compose.yml` trong thÆ° má»¥c `page-service` Ä‘á»ƒ Ä‘á»‹nh nghÄ©a service PostgreSQL.
    - Cáº¥u hÃ¬nh port mapping (5432:5432), volume mapping (Ä‘á»ƒ dá»¯ liá»‡u Ä‘Æ°á»£c duy trÃ¬), vÃ  biáº¿n mÃ´i trÆ°á»ng cho database (tÃªn database, user, password).
    - Cháº¡y `docker-compose up -d` Ä‘á»ƒ khá»Ÿi Ä‘á»™ng PostgreSQL container.
    - Sá»­ dá»¥ng DBeaver (hoáº·c pgAdmin) Ä‘á»ƒ káº¿t ná»‘i vÃ  xÃ¡c nháº­n database Ä‘Ã£ hoáº¡t Ä‘á»™ng.
- **Káº¿t quáº£**: CÆ¡ sá»Ÿ dá»¯ liá»‡u PostgreSQL Ä‘Ã£ Ä‘Æ°á»£c thiáº¿t láº­p vÃ  cháº¡y thÃ nh cÃ´ng trong má»™t Docker container, sáºµn sÃ ng Ä‘á»ƒ Page Service káº¿t ná»‘i.
- **Tools/Tech**: Docker, Docker Compose, PostgreSQL, DBeaver.
- **Links**: [Link GitHub Page Service Repo (commit: Setup PostgreSQL with Docker - placeholder)], [Screenshot DBeaver connected to DB]

### 2. Thiáº¿t láº­p Spring Data JPA vÃ  táº¡o Entity Classes â±ï¸ 2 tiáº¿ng
- **MÃ´ táº£**:
    - Trong dá»± Ã¡n `page-service`, thÃªm cÃ¡c dependency `spring-boot-starter-data-jpa` vÃ  `postgresql` vÃ o `pom.xml`.
    - Táº¡o cÃ¡c Entity class tÆ°Æ¡ng á»©ng vá»›i ERD Ä‘Ã£ thiáº¿t káº¿:
        - `Page.java`: (id, slug, title, content, type, createdAt, updatedAt)
        - `Section.java`: (id, pageId, order, type, contentJson)
        - `Banner.java`: (id, pageId, imageUrl, link)
        - `PageSetting.java`: (id, key, value, description)
    - Sá»­ dá»¥ng cÃ¡c annotations JPA (`@Entity`, `@Id`, `@GeneratedValue`, `@Column`, `@ManyToOne`, `@OneToMany`) Ä‘á»ƒ Ä‘á»‹nh nghÄ©a Ã¡nh xáº¡ giá»¯a Ä‘á»‘i tÆ°á»£ng vÃ  báº£ng database.
    - Sá»­ dá»¥ng Lombok (`@Data`, `@NoArgsConstructor`, `@AllArgsConstructor`) Ä‘á»ƒ giáº£m boilerplate code.
- **Káº¿t quáº£**: CÃ¡c Entity class Ä‘Ã£ Ä‘Æ°á»£c táº¡o, thiáº¿t láº­p má»‘i quan há»‡ giá»¯a chÃºng, sáºµn sÃ ng cho Spring Data JPA tá»± Ä‘á»™ng táº¡o báº£ng vÃ  tÆ°Æ¡ng tÃ¡c.
- **Tools/Tech**: Spring Boot, Spring Data JPA, Lombok, IntelliJ IDEA.
- **Links**: [Link GitHub Page Service Repo (commit: Create Page Service Entities - placeholder)]

### 3. Cáº¥u hÃ¬nh Database Connection vÃ  Kiá»ƒm tra â±ï¸ 1 tiáº¿ng
- **MÃ´ táº£**:
    - Trong `application.properties` cá»§a `page-service`, cáº¥u hÃ¬nh cÃ¡c thuá»™c tÃ­nh database:
        - `spring.datasource.url=jdbc:postgresql://localhost:5432/page_db`
        - `spring.datasource.username=user`
        - `spring.datasource.password=password`
        - `spring.jpa.hibernate.ddl-auto=update` (hoáº·c `create` cho láº§n Ä‘áº§u)
        - `spring.jpa.show-sql=true`
    - Cháº¡y á»©ng dá»¥ng Spring Boot vÃ  kiá»ƒm tra log Ä‘á»ƒ Ä‘áº£m báº£o káº¿t ná»‘i database thÃ nh cÃ´ng vÃ  Hibernate Ä‘Ã£ táº¡o/cáº­p nháº­t cÃ¡c báº£ng.
- **Káº¿t quáº£**: Page Service Ä‘Ã£ káº¿t ná»‘i thÃ nh cÃ´ng vá»›i PostgreSQL database vÃ  cÃ¡c báº£ng Ä‘Ã£ Ä‘Æ°á»£c táº¡o tá»± Ä‘á»™ng bá»Ÿi Hibernate.
- **Tools/Tech**: Spring Boot, IntelliJ IDEA.
- **Links**: [Link GitHub Page Service Repo (commit: Configure DB Connection - placeholder)], [Screenshot Console log showing DB connection]

## ğŸ“š Kiáº¿n thá»©c há»c Ä‘Æ°á»£c

### ğŸ”§ Ká»¹ nÄƒng ká»¹ thuáº­t
- **Docker for Development**: Thá»±c hÃ nh sá»­ dá»¥ng Docker Compose Ä‘á»ƒ thiáº¿t láº­p database cá»¥c bá»™, Ä‘áº£m báº£o mÃ´i trÆ°á»ng phÃ¡t triá»ƒn nháº¥t quÃ¡n.
- **Spring Data JPA**: Náº¯m vá»¯ng cÃ¡ch Ä‘á»‹nh nghÄ©a Entity classes, sá»­ dá»¥ng annotations JPA Ä‘á»ƒ Ã¡nh xáº¡ Ä‘á»‘i tÆ°á»£ng-quan há»‡.
- **Database Configuration**: Cáº¥u hÃ¬nh Spring Boot Ä‘á»ƒ káº¿t ná»‘i vá»›i PostgreSQL database.

### ğŸ’¡ KhÃ¡i niá»‡m vÃ  lÃ½ thuyáº¿t
- **ORM (Object-Relational Mapping)**: Hiá»ƒu cÃ¡ch JPA/Hibernate giÃºp Ã¡nh xáº¡ cÃ¡c Ä‘á»‘i tÆ°á»£ng Java vá»›i cÃ¡c báº£ng database, giáº£m thiá»ƒu viá»‡c viáº¿t SQL thá»§ cÃ´ng.
- **Database Migration vs. `ddl-auto`**: Nháº­n thá»©c sá»± khÃ¡c biá»‡t giá»¯a viá»‡c sá»­ dá»¥ng `spring.jpa.hibernate.ddl-auto` (phÃ¹ há»£p cho dev) vÃ  cÃ¡c cÃ´ng cá»¥ migration (Flyway/Liquibase, cáº§n cho production).

## ğŸš§ KhÃ³ khÄƒn vÃ  giáº£i phÃ¡p

### Váº¥n Ä‘á» 1: Lá»—i káº¿t ná»‘i database ban Ä‘áº§u tá»« Spring Boot
- **MÃ´ táº£**: Khi láº§n Ä‘áº§u cháº¡y Page Service, gáº·p lá»—i "Connection refused" khi cá»‘ gáº¯ng káº¿t ná»‘i Ä‘áº¿n PostgreSQL.
- **áº¢nh hÆ°á»Ÿng**: KhÃ´ng thá»ƒ khá»Ÿi Ä‘á»™ng á»©ng dá»¥ng vÃ  tiáº¿p tá»¥c phÃ¡t triá»ƒn Backend.
- **NguyÃªn nhÃ¢n gá»‘c rá»…**: QuÃªn cáº¥u hÃ¬nh `network` trong `docker-compose.yml` Ä‘á»ƒ cho phÃ©p container cá»§a Spring Boot cÃ³ thá»ƒ truy cáº­p container cá»§a PostgreSQL báº±ng hostname `localhost`. Hoáº·c lá»—i cáº¥u hÃ¬nh `spring.datasource.url`.
- **CÃ¡ch giáº£i quyáº¿t Ä‘Ã£ Ã¡p dá»¥ng**:
    1.  Kiá»ƒm tra láº¡i `docker-compose.yml` Ä‘á»ƒ Ä‘áº£m báº£o `ports` vÃ  `environment` variables cho PostgreSQL lÃ  chÃ­nh xÃ¡c.
    2.  Äáº£m báº£o ráº±ng Page Service Ä‘ang cá»‘ gáº¯ng káº¿t ná»‘i Ä‘áº¿n Ä‘Ãºng hostname vÃ  port (`localhost:5432`).
    3.  Kiá»ƒm tra láº¡i `spring.datasource.url` trong `application.properties`.
    4.  Trong trÆ°á»ng há»£p Docker, `localhost` tá»« bÃªn trong container Spring Boot khÃ´ng trá» Ä‘áº¿n container PostgreSQL. Sáº½ pháº£i sá»­ dá»¥ng tÃªn service cá»§a container PostgreSQL trong `docker-compose.yml` (vÃ­ dá»¥: `db` náº¿u service cÃ³ tÃªn lÃ  `db`) lÃ m hostname trong `spring.datasource.url` khi triá»ƒn khai (nhÆ°ng vá»›i local dev cÃ³ thá»ƒ váº«n dÃ¹ng `localhost:5432` náº¿u Spring Boot cháº¡y trá»±c tiáº¿p trÃªn host).
- **Káº¿t quáº£ sau khi giáº£i quyáº¿t**: Káº¿t ná»‘i database thÃ nh cÃ´ng sau khi chá»‰nh sá»­a `application.properties` vÃ  Ä‘áº£m báº£o Docker container hoáº¡t Ä‘á»™ng Ä‘Ãºng.
- **BÃ i há»c rÃºt ra**: Khi lÃ m viá»‡c vá»›i Docker vÃ  nhiá»u service, viá»‡c cáº¥u hÃ¬nh network vÃ  hostname giá»¯a cÃ¡c container lÃ  ráº¥t quan trá»ng. LuÃ´n kiá»ƒm tra ká»¹ cÃ¡c thÃ´ng sá»‘ káº¿t ná»‘i vÃ  log lá»—i.

## ğŸ’­ Suy ngáº«m & Nháº­n thá»©c

### HÃ´m nay cÃ³ gÃ¬ diá»…n ra tá»‘t Ä‘áº¹p?
- ÄÃ£ thiáº¿t láº­p thÃ nh cÃ´ng mÃ´i trÆ°á»ng phÃ¡t triá»ƒn Backend vá»›i PostgreSQL trÃªn Docker.
- CÃ¡c Entity class cho Page Service Ä‘Ã£ Ä‘Æ°á»£c táº¡o vÃ  JPA hoáº¡t Ä‘á»™ng Ä‘Ãºng, tá»± Ä‘á»™ng táº¡o cÃ¡c báº£ng.
- Cáº£m tháº¥y ráº¥t hÃ o há»©ng khi báº¯t Ä‘áº§u chuyá»ƒn Ä‘á»•i thiáº¿t káº¿ thÃ nh cÃ¡c lá»›p dá»¯ liá»‡u thá»±c táº¿.

### Cáº§n cáº£i thiá»‡n Ä‘iá»u gÃ¬?
- Cáº§n nghiÃªn cá»©u sÃ¢u hÆ¡n vá» cÃ¡c má»‘i quan há»‡ phá»©c táº¡p hÆ¡n trong JPA (vÃ­ dá»¥: `ManyToMany`, `Embedded`).
- Báº¯t Ä‘áº§u nghÄ© vá» cÃ¡c lá»›p Repository vÃ  Service cho cÃ¡c Entity Ä‘Ã£ táº¡o.

### ThÃ´ng tin chi tiáº¿t chÃ­nh
- Docker Compose lÃ  má»™t cÃ´ng cá»¥ tuyá»‡t vá»i Ä‘á»ƒ khá»Ÿi táº¡o mÃ´i trÆ°á»ng phÃ¡t triá»ƒn cá»¥c bá»™ phá»©c táº¡p má»™t cÃ¡ch nhanh chÃ³ng vÃ  dá»… dÃ ng.
- JPA/Hibernate giÃºp tÄƒng tá»‘c Ä‘á»™ phÃ¡t triá»ƒn Backend báº±ng cÃ¡ch tá»± Ä‘á»™ng hÃ³a viá»‡c tÆ°Æ¡ng tÃ¡c vá»›i database, nhÆ°ng cÅ©ng Ä‘Ã²i há»i hiá»ƒu biáº¿t sÃ¢u sáº¯c Ä‘á»ƒ sá»­ dá»¥ng hiá»‡u quáº£.

### CÃ¢u há»i & Tháº¯c máº¯c
- CÃ³ best practices nÃ o cho viá»‡c cáº¥u hÃ¬nh `ddl-auto` trong mÃ´i trÆ°á»ng phÃ¡t triá»ƒn vÃ  production?
- LÃ m tháº¿ nÃ o Ä‘á»ƒ quáº£n lÃ½ cÃ¡c database migrations (thay Ä‘á»•i schema) má»™t cÃ¡ch an toÃ n vÃ  tá»± Ä‘á»™ng?

## ğŸ“‹ Káº¿ hoáº¡ch ngÃ y mai

### Nhiá»‡m vá»¥ Æ°u tiÃªn
- [ ] **High**: Táº¡o cÃ¡c Repository interfaces cho cÃ¡c Entity (<code>Page</code>, <code>Section</code>, <code>Banner</code>, <code>PageSetting</code>) sá»­ dá»¥ng Spring Data JPA.
- [ ] **Medium**: XÃ¢y dá»±ng cÃ¡c Service classes Ä‘á»ƒ xá»­ lÃ½ logic nghiá»‡p vá»¥ cÆ¡ báº£n cho cÃ¡c Entity nÃ y (vÃ­ dá»¥: CRUD operations).
- [ ] **Low**: Báº¯t Ä‘áº§u Ä‘á»‹nh nghÄ©a cÃ¡c DTOs (Data Transfer Objects) cho cÃ¡c API endpoint cá»§a Page Service.

### Má»¥c tiÃªu há»c táº­p
- [ ] Äá»c tÃ i liá»‡u vá» cÃ¡c phÆ°Æ¡ng thá»©c query tÃ¹y chá»‰nh trong Spring Data JPA.
- [ ] TÃ¬m hiá»ƒu vá» cÃ¡ch triá»ƒn khai cÃ¡c lá»›p Service vÃ  Repository theo Ä‘Ãºng nguyÃªn táº¯c SOLID.

### CÃ¡c cuá»™c há»p vÃ  thá»i háº¡n
- KhÃ´ng cÃ³ cuá»™c há»p cá»‘ Ä‘á»‹nh.

## ğŸ“Š Tá»± Ä‘Ã¡nh giÃ¡

### NÄƒng suáº¥t
- **Äiá»ƒm**: 9/10
- **LÃ½ do**: HoÃ n thÃ nh cÃ¡c má»¥c tiÃªu quan trá»ng Ä‘á»ƒ khá»Ÿi Ä‘á»™ng giai Ä‘oáº¡n Backend, tá»« thiáº¿t láº­p database Ä‘áº¿n táº¡o Entity.
- **CÃ¡ch cáº£i thiá»‡n**: CÃ³ thá»ƒ viáº¿t cÃ¡c script tá»± Ä‘á»™ng hÃ³a nhá» Ä‘á»ƒ kiá»ƒm tra database connection.

### Há»c há»i
- **Äiá»ƒm**: 9/10
- **LÃ½ do**: Cá»§ng cá»‘ kiáº¿n thá»©c vá» Docker Compose, Spring Data JPA vÃ  cÃ¡ch tÃ­ch há»£p chÃºng.
- **CÃ¡ch cáº£i thiá»‡n**: Thá»±c hÃ nh táº¡o cÃ¡c entity vá»›i cÃ¡c má»‘i quan há»‡ phá»©c táº¡p hÆ¡n.

### Há»£p tÃ¡c
- **Äiá»ƒm**: 7/10
- **LÃ½ do**: CÃ´ng viá»‡c hÃ´m nay chá»§ yáº¿u lÃ  setup cÃ¡ nhÃ¢n.
- **CÃ¡ch cáº£i thiá»‡n**: Chuáº©n bá»‹ cÃ¡c cáº¥u hÃ¬nh Docker vÃ  code Entity Ä‘á»ƒ chia sáº» vá»›i nhÃ³m.

### Má»©c Ä‘á»™ hÃ i lÃ²ng tá»•ng thá»ƒ
- **Äiá»ƒm**: 9/10
- **LÃ½ do**: Ráº¥t hÃ i lÃ²ng vá»›i viá»‡c chuyá»ƒn Ä‘á»•i sang Backend vÃ  viá»‡c thiáº¿t láº­p mÃ´i trÆ°á»ng thÃ nh cÃ´ng.
- **CÃ¡ch cáº£i thiá»‡n**: Duy trÃ¬ Ä‘Ã  phÃ¡t triá»ƒn vÃ  sá»± táº­p trung.

## ğŸ“ Tá»‡p Ä‘Ã­nh kÃ¨m & Link liÃªn káº¿t

### TÃ i nguyÃªn há»c táº­p
- [TÃ i liá»‡u Docker Compose chÃ­nh thá»©c](https://docs.docker.com/compose/)
- [TÃ i liá»‡u Spring Data JPA](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#reference)

#### - Danh sÃ¡ch cÃ¡c video Ä‘Ã£ xem:
    - Video hÆ°á»›ng dáº«n sá»­ dá»¥ng Docker Compose vá»›i Spring Boot vÃ  PostgreSQL.

### Code & Dá»± Ã¡n
- [Link GitHub Page Service Repo (current state - placeholder)]

### TÃ i liá»‡u há»c táº­p
- [BÃ i viáº¿t vá» cÃ¡c annotations JPA phá»• biáº¿n](https://www.baeldung.com/jpa-annotations)

### áº¢nh chá»¥p mÃ n hÃ¬nh & Báº£n demo
- [Screenshot DBeaver hiá»ƒn thá»‹ cÃ¡c báº£ng má»›i táº¡o]
- [áº¢nh chá»¥p mÃ n hÃ¬nh cáº¥u trÃºc Entity classes]

---

**ğŸ“ Ghi chÃº quan trá»ng cho ngÃ y mai:**
Táº­p trung vÃ o viá»‡c táº¡o cÃ¡c lá»›p Repository vÃ  Service Ä‘á»ƒ báº¯t Ä‘áº§u xÃ¢y dá»±ng cÃ¡c chá»©c nÄƒng nghiá»‡p vá»¥ cho Page Service.

**ğŸ¯ Tiáº¿n Ä‘á»™ so vá»›i má»¥c tiÃªu tuáº§n:**
**40%** (Setup DB, táº¡o Entities)

---
_Worklog created by: LÆ° Hiáº¿u Trung_
_Next review: 27/11/2025_