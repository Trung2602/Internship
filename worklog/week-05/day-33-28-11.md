# Worklog - NgÃ y 28/11/2025

## ğŸ“… ThÃ´ng tin cÆ¡ báº£n

- **NgÃ y**: 28/11/2025
- **Thá»©**: Thá»© SÃ¡u
- **Tuáº§n thá»±c táº­p**: 5/8
- **Thá»i gian lÃ m viá»‡c**: 18:00 - 22:00
- **Mood**: ğŸ¤ Táº­p trung vÃ o viá»‡c quáº£n lÃ½ má»‘i quan há»‡ giá»¯a cÃ¡c Page vÃ  Users.

## ğŸ¯ Má»¥c tiÃªu ngÃ y hÃ´m nay

- [x] PhÃ¡t triá»ƒn API cho Page Member management (thÃªm/xÃ³a thÃ nh viÃªn vÃ o má»™t page).
- [x] Thiáº¿t káº¿ database schema cho `page_members` table.
- [x] Implement CRUD cho Page Members, liÃªn káº¿t vá»›i User Service (náº¿u cÃ³, hoáº·c sá»­ dá»¥ng User ID giáº£ Ä‘á»‹nh).

## ğŸ’¼ CÃ´ng viá»‡c Ä‘Ã£ thá»±c hiá»‡n

### 1. Thiáº¿t káº¿ database schema cho `page_members` table â±ï¸ 18:00 - 19:00

- **MÃ´ táº£**: ÄÃ£ thiáº¿t káº¿ báº£ng `page_members` Ä‘á»ƒ lÆ°u trá»¯ má»‘i quan há»‡ giá»¯a Page vÃ  User. Báº£ng nÃ y sáº½ cÃ³ cÃ¡c trÆ°á»ng `page_id` (khÃ³a ngoáº¡i Ä‘áº¿n báº£ng `pages`), `user_id` (khÃ³a ngoáº¡i Ä‘áº¿n báº£ng `users` - giáº£ Ä‘á»‹nh cÃ³ má»™t User Service hoáº·c sáº½ dÃ¹ng ID ngÆ°á»i dÃ¹ng tá»« authentication), vÃ  `role` (vÃ­ dá»¥: ADMIN, EDITOR, MEMBER). Táº¡o má»™t `composite primary key` trÃªn `page_id` vÃ  `user_id`.
- **Káº¿t quáº£**: Schema database cho `PageMember` Ä‘Ã£ sáºµn sÃ ng, pháº£n Ã¡nh má»‘i quan há»‡ nhiá»u-nhiá»u giá»¯a Page vÃ  User.
- **Tools/Tech**: PostgreSQL, JPA.
- **Links**:

### 2. PhÃ¡t triá»ƒn API cho Page Member management â±ï¸ 19:00 - 21:00

- **MÃ´ táº£**: ÄÃ£ implement cÃ¡c endpoint RESTful API cho viá»‡c quáº£n lÃ½ thÃ nh viÃªn cá»§a má»™t Page:
  - `POST /api/v1/pages/{slug}/members`: ThÃªm thÃ nh viÃªn vÃ o Page.
  - `DELETE /api/v1/pages/{slug}/members/{userId}`: XÃ³a thÃ nh viÃªn khá»i Page.
  - `GET /api/v1/pages/{slug}/members`: Láº¥y danh sÃ¡ch thÃ nh viÃªn cá»§a Page.
    ÄÃ£ xá»­ lÃ½ cÃ¡c trÆ°á»ng há»£p cáº¡nh nhÆ° Page khÃ´ng tá»“n táº¡i, User khÃ´ng tá»“n táº¡i (sá»­ dá»¥ng User ID giáº£ Ä‘á»‹nh).
- **Káº¿t quáº£**: Page Service cÃ³ thá»ƒ quáº£n lÃ½ thÃ nh viÃªn cho tá»«ng Page.
- **Tools/Tech**: Spring Boot, Spring Data JPA, Postman.
- **Links**:

### 3. Implement CRUD cho Page Members â±ï¸ 21:00 - 22:00

- **MÃ´ táº£**: ÄÃ£ táº¡o `PageMember` Entity, Repository vÃ  Service layer. Logic CRUD cho Page Member Ä‘Ã£ Ä‘Æ°á»£c tÃ­ch há»£p, bao gá»“m viá»‡c táº¡o má»‘i quan há»‡ giá»¯a Page vÃ  User. Sá»­ dá»¥ng `PageRepository` vÃ  `PageMemberRepository` Ä‘á»ƒ thao tÃ¡c vá»›i database.
- **Káº¿t quáº£**: CÃ¡c chá»©c nÄƒng thÃªm/xÃ³a/láº¥y thÃ nh viÃªn cho Page hoáº¡t Ä‘á»™ng Ä‘Ãºng.
- **Tools/Tech**: Spring Data JPA, PostgreSQL.
- **Links**:

## ğŸ“š Kiáº¿n thá»©c há»c Ä‘Æ°á»£c

### ğŸ”§ Ká»¹ nÄƒng ká»¹ thuáº­t

- **Many-to-Many Relationships**: Thiáº¿t káº¿ vÃ  triá»ƒn khai má»‘i quan há»‡ nhiá»u-nhiá»u trong JPA.
- **Composite Primary Keys**: Sá»­ dá»¥ng khÃ³a chÃ­nh phá»©c há»£p trong database vÃ  JPA.
- **RESTful API Design for Sub-resources**: Thiáº¿t káº¿ API cho cÃ¡c tÃ i nguyÃªn con (members thuá»™c má»™t page).

### ğŸ’¡ KhÃ¡i niá»‡m vÃ  lÃ½ thuyáº¿t

- **Database Normalization**: Äáº£m báº£o cáº¥u trÃºc database tá»‘i Æ°u vÃ  trÃ¡nh trÃ¹ng láº·p.
- **Data Integrity**: Äáº£m báº£o má»‘i quan há»‡ giá»¯a Page vÃ  PageMember luÃ´n Ä‘Ãºng.

### ğŸ¤ Soft Skills

- **Problem Solving**: Giáº£i quyáº¿t cÃ¡c váº¥n Ä‘á» liÃªn quan Ä‘áº¿n thiáº¿t káº¿ database vÃ  ORM cho má»‘i quan há»‡ phá»©c táº¡p.
- **Structured Thinking**: PhÃ¢n tÃ­ch vÃ  thiáº¿t káº¿ má»‘i quan há»‡ giá»¯a cÃ¡c entity.

## ğŸš§ KhÃ³ khÄƒn vÃ  giáº£i phÃ¡p

### Váº¥n Ä‘á» 1: Xá»­ lÃ½ Composite Primary Key trong JPA

- **MÃ´ táº£**: Khi thiáº¿t káº¿ báº£ng `page_members` vá»›i `page_id` vÃ  `user_id` lÃ m khÃ³a chÃ­nh phá»©c há»£p, viá»‡c Ã¡nh xáº¡ nÃ y trong JPA yÃªu cáº§u má»™t `@Embeddable` class cho ID.
- **áº¢nh hÆ°á»Ÿng**: Lá»—i JPA runtime náº¿u Ã¡nh xáº¡ khÃ´ng Ä‘Ãºng.
- **NguyÃªn nhÃ¢n gá»‘c rá»…**: Thiáº¿u kinh nghiá»‡m vá»›i `@EmbeddedId` vÃ  `@Embeddable`.
- **CÃ¡ch giáº£i quyáº¿t Ä‘Ã£ Ã¡p dá»¥ng**: ÄÃ£ nghiÃªn cá»©u tÃ i liá»‡u Spring Data JPA vÃ  cÃ¡c vÃ­ dá»¥ vá» `@EmbeddedId`. Táº¡o má»™t class `PageMemberId` Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u `@Embeddable` chá»©a `pageId` vÃ  `userId`. Sá»­ dá»¥ng `PageMemberId` lÃ m khÃ³a chÃ­nh cho `PageMember` Entity.
- **Káº¿t quáº£ sau khi giáº£i quyáº¿t**: Ãnh xáº¡ composite primary key thÃ nh cÃ´ng, JPA hoáº¡t Ä‘á»™ng Ä‘Ãºng.
- **BÃ i há»c rÃºt ra**: JPA cÃ³ thá»ƒ phá»©c táº¡p vá»›i cÃ¡c trÆ°á»ng há»£p Ä‘áº·c biá»‡t nhÆ° composite keys, cáº§n tham kháº£o tÃ i liá»‡u ká»¹ lÆ°á»¡ng.

### Váº¥n Ä‘á» 2: Äáº£m báº£o User ID há»£p lá»‡ khi thÃªm thÃ nh viÃªn

- **MÃ´ táº£**: Hiá»‡n táº¡i, User ID chá»‰ lÃ  má»™t `Long` ID giáº£ Ä‘á»‹nh. Trong mÃ´i trÆ°á»ng thá»±c táº¿, cáº§n xÃ¡c thá»±c ráº±ng `userId` nÃ y tá»“n táº¡i trong User Service.
- **áº¢nh hÆ°á»Ÿng**: CÃ³ thá»ƒ thÃªm cÃ¡c thÃ nh viÃªn khÃ´ng tá»“n táº¡i vÃ o Page.
- **NguyÃªn nhÃ¢n gá»‘c rá»…**: User Service chÆ°a Ä‘Æ°á»£c phÃ¡t triá»ƒn.
- **CÃ¡ch giáº£i quyáº¿t Ä‘Ã£ Ã¡p dá»¥ng**: Táº¡m thá»i, API chá»‰ kiá»ƒm tra `userId` cÃ³ pháº£i lÃ  sá»‘ dÆ°Æ¡ng há»£p lá»‡. ÄÃ£ ghi nháº­n Ä‘Ã¢y lÃ  má»™t technical debt vÃ  sáº½ cáº§n tÃ­ch há»£p vá»›i User Service (hoáº·c má»™t Authentication Service) sau nÃ y Ä‘á»ƒ xÃ¡c thá»±c `userId` vÃ  láº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng.
- **Káº¿t quáº£ sau khi giáº£i quyáº¿t**: TÃ­nh nÄƒng quáº£n lÃ½ thÃ nh viÃªn hoáº¡t Ä‘á»™ng vá»›i giáº£ Ä‘á»‹nh vá» User ID, vá»›i káº¿ hoáº¡ch tÃ­ch há»£p sau.
- **BÃ i há»c rÃºt ra**: Khi phÃ¡t triá»ƒn Microservices, cáº§n nháº­n diá»‡n vÃ  ghi nháº­n cÃ¡c dependency vá»›i cÃ¡c service khÃ¡c Ä‘á»ƒ giáº£i quyáº¿t sau nÃ y.

## ğŸ’­ Suy ngáº«m & Nháº­n thá»©c

### HÃ´m nay cÃ³ gÃ¬ diá»…n ra tá»‘t Ä‘áº¹p?

- TÃ­nh nÄƒng quáº£n lÃ½ Page Member Ä‘Ã£ Ä‘Æ°á»£c triá»ƒn khai, cho phÃ©p thÃªm/xÃ³a/láº¥y thÃ nh viÃªn cho má»™t Page.
- ÄÃ£ há»c cÃ¡ch xá»­ lÃ½ má»‘i quan há»‡ nhiá»u-nhiá»u vÃ  composite primary keys trong JPA.
- Service Ä‘Ã£ cÃ³ kháº£ nÄƒng quáº£n lÃ½ cÃ¡c vai trÃ² cÆ¡ báº£n.

### Cáº§n cáº£i thiá»‡n Ä‘iá»u gÃ¬?

- Cáº§n phÃ¡t triá»ƒn API cho Page Follower management.
- Cáº§n thiáº¿t láº­p cÆ¡ cháº¿ phÃ¢n quyá»n quáº£n trá»‹ (chá»‰ Member má»›i cÃ³ quyá»n Ä‘Äƒng táº£i sá»± kiá»‡n).

### ThÃ´ng tin chi tiáº¿t chÃ­nh

- Viá»‡c quáº£n lÃ½ cÃ¡c má»‘i quan há»‡ giá»¯a cÃ¡c entity lÃ  cá»‘t lÃµi cá»§a Backend.
- JPA giÃºp Ä‘Æ¡n giáº£n hÃ³a viá»‡c tÆ°Æ¡ng tÃ¡c vá»›i database nhÆ°ng cáº§n hiá»ƒu rÃµ cÃ¡c Ã¡nh xáº¡ phá»©c táº¡p.

### CÃ¢u há»i & Tháº¯c máº¯c

- CÃ³ best practices nÃ o cho viá»‡c thiáº¿t káº¿ API cho cÃ¡c má»‘i quan há»‡ nhiá»u-nhiá»u khi cÃ³ thÃªm cÃ¡c thuá»™c tÃ­nh trÃªn má»‘i quan há»‡ (vÃ­ dá»¥: `role` cá»§a thÃ nh viÃªn)?
- LÃ m tháº¿ nÃ o Ä‘á»ƒ test cÃ¡c API cÃ³ dependency vá»›i má»™t service khÃ¡c chÆ°a tá»“n táº¡i (vÃ­ dá»¥: User Service)?

## ğŸ“‹ Káº¿ hoáº¡ch ngÃ y mai

### Nhiá»‡m vá»¥ Æ°u tiÃªn

- [ ] **High**: PhÃ¡t triá»ƒn API cho Page Follower management (follow/unfollow má»™t page).
- [ ] **Medium**: Thiáº¿t káº¿ database schema cho `page_followers` table.
- [ ] **Low**: TÃ¬m hiá»ƒu vá» cÃ¡c ká»¹ thuáº­t tá»‘i Æ°u hÃ³a truy váº¥n cho cÃ¡c báº£ng cÃ³ nhiá»u báº£n ghi (vÃ­ dá»¥: danh sÃ¡ch followers).

### Má»¥c tiÃªu há»c táº­p

- [ ] Äá»c tÃ i liá»‡u vá» Spring Data JPA vÃ  cÃ¡c truy váº¥n hiá»‡u suáº¥t cao.
- [ ] TÃ¬m hiá»ƒu vá» thiáº¿t káº¿ API cho cÃ¡c tÃ¡c vá»¥ social (follow/unfollow).

### CÃ¡c cuá»™c há»p vÃ  thá»i háº¡n

- KhÃ´ng cÃ³ cuá»™c há»p cá»‘ Ä‘á»‹nh.

## ğŸ“Š Tá»± Ä‘Ã¡nh giÃ¡

### NÄƒng suáº¥t lÃ m viá»‡c

- **Äiá»ƒm sá»‘**: 9/10
- **LÃ½ do**: HoÃ n thÃ nh xuáº¥t sáº¯c viá»‡c triá»ƒn khai há»‡ thá»‘ng API quáº£n lÃ½ thÃ nh viÃªn (Member Management); xá»­ lÃ½ thÃ nh cÃ´ng cÃ¡c má»‘i quan há»‡ thá»±c thá»ƒ phá»©c táº¡p trong cÆ¡ sá»Ÿ dá»¯ liá»‡u.
- **CÃ¡ch cáº£i thiá»‡n**: Báº¯t Ä‘áº§u nghiÃªn cá»©u chuyÃªn sÃ¢u vá» cÆ¡ cháº¿ phÃ¢n quyá»n (**Authorization**) trong **Spring Security** (nhÆ° RBAC - Role-Based Access Control) Ä‘á»ƒ báº£o vá»‡ cÃ¡c tÃ i nguyÃªn nháº¡y cáº£m.

### Há»c há»i

- **Äiá»ƒm sá»‘**: 9.5/10
- **Kiáº¿n thá»©c má»›i há»c Ä‘Æ°á»£c**:
  - Ká»¹ thuáº­t Ã¡nh xáº¡ thá»±c thá»ƒ nÃ¢ng cao vá»›i **JPA/Hibernate** (nhÆ° @OneToMany, @ManyToMany).
  - TÆ° duy thiáº¿t káº¿ **Sub-resource API** (vÃ­ dá»¥: `/pages/{id}/members`) chuáº©n RESTful.
- **CÃ¡ch Ã¡p dá»¥ng**: Trá»±c tiáº¿p xÃ¢y dá»±ng cáº¥u trÃºc Page Service cho phÃ©p quáº£n lÃ½ vai trÃ² vÃ  danh sÃ¡ch thÃ nh viÃªn má»™t cÃ¡ch linh hoáº¡t vÃ  nháº¥t quÃ¡n.
- **CÃ¡ch cáº£i thiá»‡n**: NghiÃªn cá»©u sÃ¢u hÆ¡n vá» cÃ¡c chiáº¿n lÆ°á»£c quáº£n lÃ½ Ä‘á»‹nh danh ngÆ°á»i dÃ¹ng (User ID Management) vÃ  cÃ¡c phÆ°Æ¡ng thá»©c tÃ­ch há»£p giao tiáº¿p giá»¯a cÃ¡c Service (User Service vÃ  Page Service).

### LÃ m viá»‡c nhÃ³m

- **Äiá»ƒm sá»‘**: 8.5/10
- **TÆ°Æ¡ng tÃ¡c**: Chá»§ Ä‘á»™ng chia sáº» cÃ¡c tÃ i liá»‡u API má»›i nháº¥t cho Ä‘á»™i ngÅ© Frontend, táº¡o Ä‘iá»u kiá»‡n Ä‘á»ƒ cÃ¡c thÃ nh viÃªn khÃ¡c báº¯t Ä‘áº§u xÃ¢y dá»±ng giao diá»‡n quáº£n lÃ½ thÃ nh viÃªn.
- **ÄÃ³ng gÃ³p**: Äá»“ng bá»™ hÃ³a cáº¥u trÃºc dá»¯ liá»‡u giá»¯a Backend vÃ  Frontend, giÃºp giáº£m thiá»ƒu rá»§i ro xung Ä‘á»™t dá»¯ liá»‡u khi tÃ­ch há»£p thá»±c táº¿.
- **CÃ¡ch cáº£i thiá»‡n**: TÄƒng cÆ°á»ng trao Ä‘á»•i trá»±c tiáº¿p vá»›i team Frontend vá» tÃ­nh tiá»‡n dá»¥ng cá»§a cáº¥u trÃºc JSON tráº£ vá» (Nested vs Flat data) Ä‘á»ƒ Ä‘áº£m báº£o API dá»… dÃ ng Ä‘Æ°á»£c tiÃªu thá»¥ trÃªn giao diá»‡n.

### Má»©c Ä‘á»™ hÃ i lÃ²ng tá»•ng thá»ƒ

- **Äiá»ƒm sá»‘**: 9/10
- **Äiá»ƒm ná»•i báº­t**: Ráº¥t hÃ i lÃ²ng khi Page Service Ä‘Ã£ hoÃ n thiá»‡n kháº£ nÄƒng quáº£n trá»‹ thÃ nh viÃªn, táº¡o tiá»n Ä‘á» vá»¯ng cháº¯c cho cÃ¡c tÃ­nh nÄƒng cá»™ng tÃ¡c sau nÃ y.
- **LÄ©nh vá»±c cáº§n cáº£i thiá»‡n**: Duy trÃ¬ sá»± táº­p trung cao Ä‘á»™ Ä‘á»ƒ chuáº©n bá»‹ cho viá»‡c phÃ¡t triá»ƒn tÃ­nh nÄƒng quáº£n lÃ½ ngÆ°á»i theo dÃµi (Follower Management) vÃ  cÃ¡c logic tÆ°Æ¡ng tÃ¡c cá»™ng Ä‘á»“ng.

## ğŸ“ Tá»‡p Ä‘Ã­nh kÃ¨m & Link liÃªn káº¿t

### TÃ i nguyÃªn há»c táº­p

- [Spring Data JPA - EmbeddedId](https://www.baeldung.com/jpa-composite-primary-keys)
- [REST API Design for Sub-resources](https://restfulapi.net/resource-naming/)

### TÃ i liá»‡u há»c táº­p

- [BÃ i viáº¿t vá» Defensive Programming in Microservices](https://www.freecodecamp.org/news/defensive-programming-in-microservices/)

**ğŸ“ Ghi chÃº quan trá»ng cho ngÃ y mai:**
Táº­p trung vÃ o phÃ¡t triá»ƒn tÃ­nh nÄƒng quáº£n lÃ½ Page Follower.

**ğŸ¯ Tiáº¿n Ä‘á»™ so vá»›i má»¥c tiÃªu tuáº§n:**
**80%** (Page Service CRUD for Pages and Members implemented)

---

_Worklog created by: LÆ° Hiáº¿u Trung_
_Next review: 29/11/2025_
