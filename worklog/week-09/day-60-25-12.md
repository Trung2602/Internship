# Worklog - NgÃ y 25/12/2025

## ğŸ“… ThÃ´ng tin cÆ¡ báº£n
- **NgÃ y**: 25/12/2025
- **Thá»©**: Thá»© NÄƒm
- **Tuáº§n thá»±c táº­p**: 9/8
- **Thá»i gian lÃ m viá»‡c**: 18:00 - 22:00
- **Mood**: ğŸ’ª Quyáº¿t tÃ¢m hoÃ n thiá»‡n háº¡ táº§ng vá»›i CloudFormation.

## ğŸ¯ Má»¥c tiÃªu ngÃ y hÃ´m nay
- [x] Báº¯t Ä‘áº§u xÃ¢y dá»±ng CloudFormation templates Ä‘á»ƒ Ä‘Ã³ng gÃ³i toÃ n bá»™ háº¡ táº§ng Backend (ECS, RDS, S3, Security Groups, IAM Roles).
- [x] Cáº¥u hÃ¬nh Application Load Balancer (ALB) vÃ  Target Groups cho Page Service vÃ  AIChat Service.
- [x] Triá»ƒn khai CloudFormation stack Ä‘áº§u tiÃªn cho cÃ¡c thÃ nh pháº§n cÆ¡ báº£n.

## ğŸ’¼ CÃ´ng viá»‡c Ä‘Ã£ thá»±c hiá»‡n

### 1. Báº¯t Ä‘áº§u xÃ¢y dá»±ng CloudFormation Templates â±ï¸ 2 tiáº¿ng
- **MÃ´ táº£**: ÄÃ£ báº¯t Ä‘áº§u viáº¿t cÃ¡c template CloudFormation báº±ng YAML Ä‘á»ƒ Ä‘á»‹nh nghÄ©a háº¡ táº§ng Backend. Báº¯t Ä‘áº§u vá»›i cÃ¡c tÃ i nguyÃªn cÆ¡ báº£n nhÆ° VPC, Subnets, Internet Gateway, NAT Gateway, Route Tables vÃ  Security Groups. Sau Ä‘Ã³, Ä‘á»‹nh nghÄ©a ECS Cluster, ECR repositories cho cÃ¡c service.
- **Káº¿t quáº£**: ÄÃ£ cÃ³ cÃ¡c template CloudFormation khá»Ÿi táº¡o cho pháº§n máº¡ng vÃ  ECS Cluster, lÃ  ná»n táº£ng cho viá»‡c triá»ƒn khai háº¡ táº§ng.
- **Tools/Tech**: AWS CloudFormation, YAML, VS Code.
- **Links**: [Link GitHub CloudFormation templates (Cáº§n thÃªm áº£nh/link)]

### 2. Cáº¥u hÃ¬nh Application Load Balancer (ALB) â±ï¸ 1.5 tiáº¿ng
- **MÃ´ táº£**: ÄÃ£ táº¡o má»™t Application Load Balancer (ALB) má»›i vÃ  cáº¥u hÃ¬nh Listener trÃªn port 80 (HTTP) vÃ  443 (HTTPS). ÄÃ£ táº¡o Target Groups riÃªng biá»‡t cho Page Service vÃ  AIChat Service, trá» Ä‘áº¿n cÃ¡c ECS Services tÆ°Æ¡ng á»©ng. Cáº¥u hÃ¬nh Routing Rules trong ALB Listener Ä‘á»ƒ Ä‘á»‹nh tuyáº¿n traffic Ä‘áº¿n Ä‘Ãºng Target Group dá»±a trÃªn path hoáº·c hostname. ÄÃ£ sá»­ dá»¥ng ACM (AWS Certificate Manager) Ä‘á»ƒ provision má»™t SSL/TLS certificate cho tÃªn miá»n tÃ¹y chá»‰nh (náº¿u cÃ³) vÃ  gáº¯n vÃ o ALB.
- **Káº¿t quáº£**: ALB Ä‘Ã£ hoáº¡t Ä‘á»™ng, Ä‘á»‹nh tuyáº¿n traffic Ä‘áº¿n Page Service vÃ  AIChat Service, há»— trá»£ HTTPS.
- **Tools/Tech**: AWS ALB Console, ACM.
- **Links**: [Screenshot ALB Listeners & Rules (Cáº§n thÃªm áº£nh/link)], [Screenshot Target Groups (Cáº§n thÃªm áº£nh/link)]

### 3. Triá»ƒn khai CloudFormation Stack Ä‘áº§u tiÃªn â±ï¸ 0.5 tiáº¿ng
- **MÃ´ táº£**: ÄÃ£ thá»­ nghiá»‡m triá»ƒn khai má»™t CloudFormation stack nhá» chá»‰ chá»©a cÃ¡c tÃ i nguyÃªn máº¡ng (VPC, Subnets, Gateways) Ä‘á»ƒ kiá»ƒm tra tÃ­nh Ä‘Ãºng Ä‘áº¯n cá»§a template.
- **Káº¿t quáº£**: Stack triá»ƒn khai thÃ nh cÃ´ng, xÃ¡c nháº­n cáº¥u trÃºc máº¡ng cÆ¡ báº£n lÃ  chÃ­nh xÃ¡c.
- **Tools/Tech**: AWS CloudFormation Console.
- **Links**: [Screenshot CloudFormation Stack creation (Cáº§n thÃªm áº£nh/link)]

## ğŸ“š Kiáº¿n thá»©c há»c Ä‘Æ°á»£c

### ğŸ”§ Ká»¹ nÄƒng ká»¹ thuáº­t
- **AWS Services**: CloudFormation, Application Load Balancer (ALB), AWS Certificate Manager (ACM).
- **Infrastructure as Code (IaC)**: Chuyá»ƒn Ä‘á»•i cÃ¡c tÃ i nguyÃªn Cloud thÃ nh code.
- **Networking**: Cáº¥u hÃ¬nh ALB vÃ  Ä‘á»‹nh tuyáº¿n nÃ¢ng cao.

### ğŸ’¡ KhÃ¡i niá»‡m vÃ  lÃ½ thuyáº¿t
- **Declarative vs Imperative**: Hiá»ƒu sá»± khÃ¡c biá»‡t giá»¯a CloudFormation (declarative) vÃ  viá»‡c cáº¥u hÃ¬nh thá»§ cÃ´ng (imperative).
- **Benefits of IaC**: TÃ­nh nháº¥t quÃ¡n, kháº£ nÄƒng tÃ¡i sá»­ dá»¥ng, version control cho háº¡ táº§ng.
- **SSL/TLS Termination**: CÃ¡ch ALB quáº£n lÃ½ SSL/TLS certificates.

### ğŸ¤ Soft Skills
- **Problem Solving**: Giáº£i quyáº¿t cÃ¡c váº¥n Ä‘á» cÃº phÃ¡p YAML vÃ  logic trong CloudFormation templates.
- **Systematic Thinking**: Tiáº¿p cáº­n viá»‡c xÃ¢y dá»±ng háº¡ táº§ng má»™t cÃ¡ch cÃ³ há»‡ thá»‘ng thÃ´ng qua IaC.

## ğŸš§ KhÃ³ khÄƒn vÃ  giáº£i phÃ¡p

### Váº¥n Ä‘á» 1: Phá»¥ thuá»™c tÃ i nguyÃªn trong CloudFormation vÃ  lá»—i rollback
- **MÃ´ táº£**: Khi báº¯t Ä‘áº§u viáº¿t template CloudFormation cho nhiá»u tÃ i nguyÃªn (VPC, Subnet, Security Group, ECS Cluster), tÃ´i gáº·p pháº£i lá»—i khi triá»ƒn khai stack do cÃ¡c tÃ i nguyÃªn phá»¥ thuá»™c láº«n nhau khÃ´ng Ä‘Æ°á»£c táº¡o Ä‘Ãºng thá»© tá»± hoáº·c tham chiáº¿u bá»‹ sai. Äiá»u nÃ y thÆ°á»ng dáº«n Ä‘áº¿n rollback toÃ n bá»™ stack.
- **áº¢nh hÆ°á»Ÿng**: Máº¥t thá»i gian debug vÃ  triá»ƒn khai láº¡i, lÃ m cháº­m tiáº¿n Ä‘á»™.
- **NguyÃªn nhÃ¢n gá»‘c rá»…**: CÃ¡c tÃ i nguyÃªn cÃ³ má»‘i quan há»‡ phá»¥ thuá»™c phá»©c táº¡p, vÃ  viá»‡c tham chiáº¿u `Fn::GetAtt` hoáº·c `Ref` khÃ´ng chÃ­nh xÃ¡c.
- **CÃ¡ch giáº£i quyáº¿t Ä‘Ã£ Ã¡p dá»¥ng**: ÄÃ£ tÃ¡ch nhá» template thÃ nh cÃ¡c stack nhá» hÆ¡n theo chá»©c nÄƒng (vÃ­ dá»¥: má»™t stack cho VPC, má»™t stack cho ECS Cluster, v.v.). Äiá»u nÃ y giÃºp dá»… dÃ ng debug vÃ  triá»ƒn khai tá»«ng pháº§n. Äá»“ng thá»i, tÃ´i Ä‘Ã£ sá»­ dá»¥ng `DependsOn` attribute Ä‘á»ƒ chá»‰ Ä‘á»‹nh rÃµ rÃ ng thá»© tá»± táº¡o tÃ i nguyÃªn khi cáº§n.
- **Káº¿t quáº£ sau khi giáº£i quyáº¿t**: CÃ¡c stack nhá» Ä‘Æ°á»£c triá»ƒn khai thÃ nh cÃ´ng, giáº£m thiá»ƒu rá»§i ro lá»—i rollback cho toÃ n bá»™ háº¡ táº§ng.
- **BÃ i há»c rÃºt ra**: Khi lÃ m viá»‡c vá»›i CloudFormation cho háº¡ táº§ng phá»©c táº¡p, hÃ£y chia nhá» thÃ nh cÃ¡c module (nested stacks hoáº·c independent stacks) vÃ  quáº£n lÃ½ cháº·t cháº½ cÃ¡c dependency.

### Váº¥n Ä‘á» 2: Cáº¥u hÃ¬nh Routing Rules cho ALB
- **MÃ´ táº£**: Ban Ä‘áº§u, tÃ´i gáº·p khÃ³ khÄƒn trong viá»‡c cáº¥u hÃ¬nh Routing Rules trÃªn ALB Ä‘á»ƒ Ä‘á»‹nh tuyáº¿n request Ä‘áº¿n Ä‘Ãºng Page Service vÃ  AIChat Service, Ä‘áº·c biá»‡t lÃ  khi chÃºng dÃ¹ng chung má»™t cá»•ng (8080) vÃ  cáº§n phÃ¢n biá»‡t dá»±a trÃªn Ä‘Æ°á»ng dáº«n API (`/api/v1/page` vs `/api/v1/ai`).
- **áº¢nh hÆ°á»Ÿng**: Frontend khÃ´ng thá»ƒ gá»i Ä‘Ãºng API cá»§a Backend.
- **NguyÃªn nhÃ¢n gá»‘c rá»…**: ChÆ°a hiá»ƒu rÃµ cÃº phÃ¡p vÃ  thá»© tá»± Æ°u tiÃªn cá»§a Routing Rules.
- **CÃ¡ch giáº£i quyáº¿t Ä‘Ã£ Ã¡p dá»¥ng**: ÄÃ£ Ä‘á»c tÃ i liá»‡u chi tiáº¿t vá» ALB Path-based routing vÃ  Priority. Äáº·t cÃ¡c rule cá»¥ thá»ƒ hÆ¡n (vÃ­ dá»¥: `/api/v1/page*`) vá»›i Ä‘á»™ Æ°u tiÃªn cao hÆ¡n cÃ¡c rule chung (vÃ­ dá»¥: `/*`). Äáº£m báº£o má»—i rule trá» Ä‘áº¿n Ä‘Ãºng Target Group.
- **Káº¿t quáº£ sau khi giáº£i quyáº¿t**: ALB Ä‘Ã£ Ä‘á»‹nh tuyáº¿n traffic chÃ­nh xÃ¡c Ä‘áº¿n tá»«ng Microservice.
- **BÃ i há»c rÃºt ra**: Hiá»ƒu rÃµ cÃ¡ch hoáº¡t Ä‘á»™ng cá»§a ALB Routing Rules vÃ  Ä‘á»™ Æ°u tiÃªn lÃ  ráº¥t quan trá»ng Ä‘á»ƒ quáº£n lÃ½ traffic cho Microservices.

## ğŸ’­ Suy ngáº«m & Nháº­n thá»©c

### HÃ´m nay cÃ³ gÃ¬ diá»…n ra tá»‘t Ä‘áº¹p?
- ÄÃ£ báº¯t Ä‘áº§u hÃ nh trÃ¬nh IaC vá»›i CloudFormation, má»™t cÃ´ng cá»¥ máº¡nh máº½.
- ALB Ä‘Ã£ Ä‘Æ°á»£c cáº¥u hÃ¬nh thÃ nh cÃ´ng Ä‘á»ƒ Ä‘á»‹nh tuyáº¿n traffic Ä‘áº¿n cÃ¡c Backend Services vÃ  há»— trá»£ HTTPS.
- Cáº£m tháº¥y tá»± tin hÆ¡n vá» kháº£ nÄƒng quáº£n lÃ½ toÃ n bá»™ háº¡ táº§ng Cloud.

### Cáº§n cáº£i thiá»‡n Ä‘iá»u gÃ¬?
- Cáº§n hoÃ n thiá»‡n cÃ¡c CloudFormation templates Ä‘á»ƒ Ä‘á»‹nh nghÄ©a toÃ n bá»™ háº¡ táº§ng má»™t cÃ¡ch tá»± Ä‘á»™ng.
- Cáº§n há»c cÃ¡ch quáº£n lÃ½ secrets trong CloudFormation (sá»­ dá»¥ng `AWS::SecretsManager::Secret` vÃ  `AWS::SecretsManager::SecretTargetAttachment`).

### ThÃ´ng tin chi tiáº¿t chÃ­nh
- CloudFormation lÃ  xÆ°Æ¡ng sá»‘ng cá»§a viá»‡c quáº£n lÃ½ háº¡ táº§ng Cloud cÃ³ thá»ƒ láº·p láº¡i vÃ  dá»… báº£o trÃ¬.
- ALB Ä‘Ã³ng vai trÃ² quan trá»ng trong viá»‡c expose vÃ  báº£o vá»‡ cÃ¡c Microservices.

### CÃ¢u há»i & Tháº¯c máº¯c
- LÃ m tháº¿ nÃ o Ä‘á»ƒ quáº£n lÃ½ cÃ¡c cáº­p nháº­t (updates) cho CloudFormation stack má»™t cÃ¡ch an toÃ n mÃ  khÃ´ng gÃ¢y downtime?
- CÃ³ cÃ´ng cá»¥ nÃ o tá»‘t hÆ¡n Ä‘á»ƒ táº¡o CloudFormation templates ngoÃ i viá»‡c viáº¿t tay YAML khÃ´ng (vÃ­ dá»¥: AWS CDK)?

## ğŸ“‹ Káº¿ hoáº¡ch ngÃ y mai

### Nhiá»‡m vá»¥ Æ°u tiÃªn
- [ ] **High**: HoÃ n thiá»‡n CloudFormation templates cho toÃ n bá»™ Backend: ECS Services, RDS instances, S3 assets bucket, IAM Roles.
- [ ] **High**: Kiá»ƒm tra hiá»‡u nÄƒng thá»±c táº¿ cá»§a há»‡ thá»‘ng trÃªn mÃ´i trÆ°á»ng Production (Frontend qua CloudFront, Backend qua ALB).
- [ ] **Medium**: Chuáº©n bá»‹ bÃ¡o cÃ¡o bÃ n giao sáº£n pháº©m.

### Má»¥c tiÃªu há»c táº­p
- [ ] Äá»c tÃ i liá»‡u vá» AWS CDK (Cloud Development Kit).
- [ ] TÃ¬m hiá»ƒu vá» cÃ¡c cÃ´ng cá»¥ giÃ¡m sÃ¡t hiá»‡u nÄƒng trÃªn AWS (CloudWatch, X-Ray).

### CÃ¡c cuá»™c há»p vÃ  thá»i háº¡n
- KhÃ´ng cÃ³ cuá»™c há»p cá»‘ Ä‘á»‹nh.

## ğŸ“Š Tá»± Ä‘Ã¡nh giÃ¡

### NÄƒng suáº¥t
- **Äiá»ƒm**: 9/10
- **LÃ½ do**: ÄÃ£ Ä‘áº¡t Ä‘Æ°á»£c cÃ¡c má»¥c tiÃªu quan trá»ng vá» ALB vÃ  CloudFormation, máº·c dÃ¹ viá»‡c viáº¿t template khÃ¡ tá»‘n thá»i gian.
- **CÃ¡ch cáº£i thiá»‡n**: Cáº§n tÄƒng tá»‘c Ä‘á»™ viáº¿t vÃ  debug CloudFormation templates.

### Há»c há»i
- **Äiá»ƒm**: 9.5/10
- **LÃ½ do**: Há»c Ä‘Æ°á»£c ráº¥t nhiá»u vá» IaC vá»›i CloudFormation vÃ  cáº¥u hÃ¬nh ALB phá»©c táº¡p.
- **CÃ¡ch cáº£i thiá»‡n**: Cáº§n tiáº¿p tá»¥c thá»±c hÃ nh vá»›i cÃ¡c ká»‹ch báº£n triá»ƒn khai Ä‘a dáº¡ng.

### Há»£p tÃ¡c
- **Äiá»ƒm**: 8/10
- **LÃ½ do**: ÄÃ£ cáº­p nháº­t cho mentor vá» tiáº¿n Ä‘á»™ vÃ  cÃ¡c thÃ¡ch thá»©c vá»›i CloudFormation.
- **CÃ¡ch cáº£i thiá»‡n**: Chá»§ Ä‘á»™ng chia sáº» cÃ¡c template CloudFormation vá»›i nhÃ³m Ä‘á»ƒ láº¥y feedback sá»›m.

### Má»©c Ä‘á»™ hÃ i lÃ²ng tá»•ng thá»ƒ
- **Äiá»ƒm**: 9/10
- **LÃ½ do**: HÃ i lÃ²ng vá»›i viá»‡c Ä‘ang xÃ¢y dá»±ng toÃ n bá»™ háº¡ táº§ng báº±ng code vÃ  ALB Ä‘Ã£ hoáº¡t Ä‘á»™ng.
- **CÃ¡ch cáº£i thiá»‡n**: Duy trÃ¬ Ä‘Ã  phÃ¡t triá»ƒn vÃ  sá»± táº­p trung cho viá»‡c hoÃ n thiá»‡n cuá»‘i cÃ¹ng.

## ğŸ“ Tá»‡p Ä‘Ã­nh kÃ¨m & Link liÃªn káº¿t

### TÃ i nguyÃªn há»c táº­p
- [TÃ i liá»‡u AWS CloudFormation User Guide](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html)
- [TÃ i liá»‡u AWS Application Load Balancer](https://docs.aws.amazon.com/elasticloadbalancing/latest/application/introduction.html)

### TÃ i liá»‡u há»c táº­p
- [BÃ i viáº¿t vá» AWS CDK vs CloudFormation](https://aws.amazon.com/cdk/resources/cdk-vs-cloudformation/)

---

**ğŸ“ Ghi chÃº quan trá»ng cho ngÃ y mai:**
NgÃ y cuá»‘i cÃ¹ng cá»§a giai Ä‘oáº¡n triá»ƒn khai! HoÃ n thiá»‡n CloudFormation, kiá»ƒm tra hiá»‡u nÄƒng vÃ  chuáº©n bá»‹ bÃ n giao.

**ğŸ¯ Tiáº¿n Ä‘á»™ so vá»›i má»¥c tiÃªu tuáº§n:**
**90%** (ALB configured, CloudFormation for basic infra started)

---
_Worklog created by: LÆ° Hiáº¿u Trung_  
_Next review: 26/12/2025_