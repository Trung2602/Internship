# Worklog - NgÃ y 30/11/2025

## ğŸ“… ThÃ´ng tin cÆ¡ báº£n
- **NgÃ y**: 30/11/2025
- **Thá»©**: Chá»§ Nháº­t
- **Tuáº§n thá»±c táº­p**: 5/8
- **Thá»i gian lÃ m viá»‡c**: 18:00 - 22:00 (4 tiáº¿ng)
- **Mood**: ğŸ˜Š Ráº¥t táº­p trung vÃ o viá»‡c hoÃ n thiá»‡n Page Service vÃ  chuáº©n bá»‹ bÃ¡o cÃ¡o tuáº§n.

## ğŸ¯ Má»¥c tiÃªu ngÃ y hÃ´m nay
- [x] Triá»ƒn khai Kafka Consumer trong Page Service Ä‘á»ƒ láº¯ng nghe topic `event-created` tá»« Event Service vÃ  cáº­p nháº­t `featured_events`.
- [x] Viáº¿t Unit Tests Ä‘Æ¡n giáº£n cho cÃ¡c Service classes vÃ  logic phÃ¢n quyá»n cá»§a Page Service.
- [x] Chuáº©n bá»‹ ná»™i dung cho `week-summary.md` cá»§a Tuáº§n 5.

## ğŸ’¼ CÃ´ng viá»‡c Ä‘Ã£ thá»±c hiá»‡n

### 1. Triá»ƒn khai Kafka Consumer cho Page Service â±ï¸ 2 tiáº¿ng
- **MÃ´ táº£**:
    - ThÃªm dependency `spring-kafka` vÃ o `pom.xml` cá»§a Page Service.
    - Cáº¥u hÃ¬nh Kafka Consumer trong `application.properties` (bootstrap servers, group ID, deserializer).
    - Táº¡o má»™t class `@Service` (vÃ­ dá»¥: `EventKafkaConsumer.java`) vá»›i `@KafkaListener` Ä‘á»ƒ láº¯ng nghe cÃ¡c message tá»« topic `event-created`.
    - Khi nháº­n Ä‘Æ°á»£c message, trÃ­ch xuáº¥t thÃ´ng tin sá»± kiá»‡n (event_id, title, description, thumbnail_url).
    - Triá»ƒn khai logic trong Service Ä‘á»ƒ kiá»ƒm tra sá»± kiá»‡n Ä‘Ã£ tá»“n táº¡i trong `featured_events` hay chÆ°a, sau Ä‘Ã³ táº¡o má»›i hoáº·c cáº­p nháº­t báº£n sao cá»§a sá»± kiá»‡n trong báº£ng `featured_events` cá»§a Page Service. Äáº£m báº£o tÃ­nh idempotency Ä‘á»ƒ trÃ¡nh trÃ¹ng láº·p.
- **Káº¿t quáº£**: Page Service hiá»‡n cÃ³ thá»ƒ láº¯ng nghe cÃ¡c sá»± kiá»‡n má»›i tá»« Event Service qua Kafka vÃ  cáº­p nháº­t danh sÃ¡ch sá»± kiá»‡n ná»•i báº­t má»™t cÃ¡ch tá»± Ä‘á»™ng.
- **Tools/Tech**: Spring for Apache Kafka, PostgreSQL, IntelliJ IDEA.
- **Links**: [Link GitHub Page Service Repo (commit: Implement Kafka Consumer for Featured Events - placeholder)]

### 2. Viáº¿t Unit Tests cho Service Classes vÃ  Authorization â±ï¸ 1 tiáº¿ng
- **MÃ´ táº£**:
    - Viáº¿t Unit Tests cho `PageService` Ä‘á»ƒ kiá»ƒm tra cÃ¡c phÆ°Æ¡ng thá»©c CRUD cÆ¡ báº£n.
    - Sá»­ dá»¥ng `Mockito` Ä‘á»ƒ mock cÃ¡c Repository vÃ  Ä‘áº£m báº£o chá»‰ kiá»ƒm tra logic cá»§a Service layer.
    - Viáº¿t tests cho logic phÃ¢n quyá»n (`@PreAuthorize`) báº±ng cÃ¡ch mock `SecurityContextHolder` Ä‘á»ƒ giáº£ láº­p ngÆ°á»i dÃ¹ng cÃ³ quyá»n/khÃ´ng cÃ³ quyá»n.
- **Káº¿t quáº£**: CÃ¡c Service class vÃ  logic phÃ¢n quyá»n cÆ¡ báº£n Ä‘Ã£ Ä‘Æ°á»£c kiá»ƒm thá»­, Ä‘áº£m báº£o chÃºng hoáº¡t Ä‘á»™ng Ä‘Ãºng nhÆ° mong Ä‘á»£i.
- **Tools/Tech**: JUnit, Mockito, Spring Boot Test, IntelliJ IDEA.
- **Links**: [Link GitHub Page Service Repo (commit: Add Unit Tests for Services & Auth - placeholder)]

### 3. Chuáº©n bá»‹ Ná»™i dung cho `week-summary.md` Tuáº§n 5 â±ï¸ 1 tiáº¿ng
- **MÃ´ táº£**: Tá»•ng há»£p cÃ¡c cÃ´ng viá»‡c Ä‘Ã£ thá»±c hiá»‡n trong Tuáº§n 5 (tá»« 24/11 Ä‘áº¿n 30/11). Táº­p trung vÃ o buá»•i demo Frontend vÃ  báº¯t Ä‘áº§u phÃ¡t triá»ƒn Backend cho Page Service. Bao gá»“m cÃ¡c má»¥c: Progress Review, Key Achievements, Challenges Analysis, Skills Development, Next Week Planning.
- **Káº¿t quáº£**: CÃ³ má»™t báº£n nhÃ¡p Ä‘áº§y Ä‘á»§ cho bÃ¡o cÃ¡o tá»•ng káº¿t tuáº§n 5.
- **Tools/Tech**: Markdown editor, Notion/Google Docs.
- **Links**: [Link draft week-summary.md (placeholder)]

## ğŸ“š Kiáº¿n thá»©c há»c Ä‘Æ°á»£c

### ğŸ”§ Ká»¹ nÄƒng ká»¹ thuáº­t
- **Spring for Apache Kafka**: Há»c cÃ¡ch triá»ƒn khai Kafka Consumer trong Spring Boot, bao gá»“m cáº¥u hÃ¬nh vÃ  xá»­ lÃ½ message.
- **Idempotency in Message Processing**: Hiá»ƒu vÃ  Ã¡p dá»¥ng cÃ¡c ká»¹ thuáº­t Ä‘á»ƒ Ä‘áº£m báº£o message Ä‘Æ°á»£c xá»­ lÃ½ má»™t láº§n duy nháº¥t, ngay cáº£ khi nháº­n trÃ¹ng láº·p.
- **Unit Testing (Backend)**: Thá»±c hÃ nh viáº¿t Unit Tests cho Service layer vÃ  kiá»ƒm thá»­ logic authorization.

### ğŸ’¡ KhÃ¡i niá»‡m vÃ  lÃ½ thuyáº¿t
- **Event-Driven Architecture**: Cá»§ng cá»‘ táº§m quan trá»ng cá»§a Kafka trong viá»‡c Ä‘á»“ng bá»™ dá»¯ liá»‡u giá»¯a cÃ¡c Microservices má»™t cÃ¡ch báº¥t Ä‘á»“ng bá»™.
- **Test-Driven Development (TDD) principles**: Báº¯t Ä‘áº§u nháº­n thá»©c vá» lá»£i Ã­ch cá»§a viá»‡c viáº¿t test Ä‘á»ƒ Ä‘áº£m báº£o cháº¥t lÆ°á»£ng vÃ  dá»… dÃ ng refactor code.

## ğŸš§ KhÃ³ khÄƒn vÃ  giáº£i phÃ¡p

### Váº¥n Ä‘á» 1: Äáº£m báº£o tÃ­nh nháº¥t quÃ¡n dá»¯ liá»‡u khi cáº­p nháº­t `featured_events` tá»« Kafka
- **MÃ´ táº£**: Khi Page Service nháº­n message `event-created`, cáº§n Ä‘áº£m báº£o ráº±ng thÃ´ng tin sá»± kiá»‡n Ä‘Æ°á»£c cáº­p nháº­t chÃ­nh xÃ¡c vÃ o báº£ng `featured_events`, vÃ  khÃ´ng táº¡o trÃ¹ng láº·p náº¿u message Ä‘Æ°á»£c gá»­i láº¡i.
- **áº¢nh hÆ°á»Ÿng**: Dá»¯ liá»‡u khÃ´ng nháº¥t quÃ¡n, áº£nh hÆ°á»Ÿng Ä‘áº¿n Frontend.
- **NguyÃªn nhÃ¢n gá»‘c rá»…**: CÃ¡c váº¥n Ä‘á» vá» "at-least-once" delivery cá»§a Kafka vÃ  thiáº¿u cÆ¡ cháº¿ chá»‘ng trÃ¹ng láº·p.
- **CÃ¡ch giáº£i quyáº¿t Ä‘Ã£ Ã¡p dá»¥ng**: Trong `EventKafkaConsumer`, sau khi nháº­n message, tÃ´i sáº½ kiá»ƒm tra xem `event_id` (lÃ  ID duy nháº¥t cá»§a sá»± kiá»‡n tá»« Event Service) Ä‘Ã£ tá»“n táº¡i trong báº£ng `featured_events` hay chÆ°a. Náº¿u Ä‘Ã£ cÃ³, tÃ´i sáº½ cáº­p nháº­t cÃ¡c trÆ°á»ng liÃªn quan; náº¿u chÆ°a, tÃ´i sáº½ táº¡o má»›i. Äiá»u nÃ y Ä‘áº£m báº£o má»—i sá»± kiá»‡n chá»‰ cÃ³ má»™t báº£n ghi duy nháº¥t trong `featured_events`, báº¥t ká»ƒ cÃ³ bao nhiÃªu message trÃ¹ng láº·p Ä‘Æ°á»£c nháº­n.
- **Káº¿t quáº£ sau khi giáº£i quyáº¿t**: Dá»¯ liá»‡u `featured_events` Ä‘Æ°á»£c duy trÃ¬ nháº¥t quÃ¡n vÃ  chÃ­nh xÃ¡c.
- **BÃ i há»c rÃºt ra**: Khi xá»­ lÃ½ message tá»« Kafka, luÃ´n pháº£i thiáº¿t káº¿ cÆ¡ cháº¿ chá»‘ng trÃ¹ng láº·p (idempotency) á»Ÿ phÃ­a Consumer Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh toÃ n váº¹n dá»¯ liá»‡u.

## ğŸ’­ Suy ngáº«m & Nháº­n thá»©c

### HÃ´m nay cÃ³ gÃ¬ diá»…n ra tá»‘t Ä‘áº¹p?
- Page Service Ä‘Ã£ hoÃ n táº¥t cÃ¡c tÃ­nh nÄƒng cá»‘t lÃµi theo yÃªu cáº§u, bao gá»“m API, báº£o máº­t, vÃ  tÃ­ch há»£p Kafka.
- CÃ¡c Unit Tests cÆ¡ báº£n Ä‘Ã£ Ä‘Æ°á»£c viáº¿t, tÄƒng cÆ°á»ng Ä‘á»™ tin cáº­y cá»§a code.
- Cáº£m tháº¥y ráº¥t hÃ i lÃ²ng khi má»™t Microservice Backend Ä‘Ã£ hoÃ n thiá»‡n theo thiáº¿t káº¿.

### Cáº§n cáº£i thiá»‡n Ä‘iá»u gÃ¬?
- Cáº§n triá»ƒn khai Ä‘áº§y Ä‘á»§ Integration Tests Ä‘á»ƒ kiá»ƒm tra luá»“ng end-to-end cá»§a cÃ¡c API vÃ  Kafka.
- NghiÃªn cá»©u vá» cÃ¡ch tá»± Ä‘á»™ng hÃ³a viá»‡c táº¡o tÃ i liá»‡u API báº±ng Springdoc OpenAPI.

### ThÃ´ng tin chi tiáº¿t chÃ­nh
- Viá»‡c tÃ­ch há»£p Kafka lÃ  má»™t bÆ°á»›c quan trá»ng Ä‘á»ƒ cÃ¡c Microservice giao tiáº¿p vá»›i nhau, nhÆ°ng cáº§n cÃ³ chiáº¿n lÆ°á»£c rÃµ rÃ ng Ä‘á»ƒ xá»­ lÃ½ dá»¯ liá»‡u.
- Viáº¿t Unit Tests giÃºp Ä‘áº£m báº£o cháº¥t lÆ°á»£ng code vÃ  tÄƒng tá»‘c Ä‘á»™ phÃ¡t triá»ƒn.

### CÃ¢u há»i & Tháº¯c máº¯c
- LÃ m tháº¿ nÃ o Ä‘á»ƒ mÃ´ phá»ng Kafka trong mÃ´i trÆ°á»ng test (vÃ­ dá»¥: embedded Kafka) Ä‘á»ƒ viáº¿t Integration Tests hiá»‡u quáº£?
- CÃ³ best practices nÃ o cho viá»‡c quáº£n lÃ½ cÃ¡c Kafka topic vÃ  schema trong mÃ´i trÆ°á»ng Microservices?

## ğŸ“‹ Káº¿ hoáº¡ch ngÃ y mai

### Nhiá»‡m vá»¥ Æ°u tiÃªn
- [ ] **High**: Gá»­i `week-summary.md` Tuáº§n 5 cho mentor.
- [ ] **Medium**: Báº¯t Ä‘áº§u thiáº¿t láº­p mÃ´i trÆ°á»ng phÃ¡t triá»ƒn cho AIChat Service. Triá»ƒn khai PostgreSQL trÃªn Docker.
- [ ] **Low**: Táº¡o cÃ¡c Entity classes cho AIChat Service (`chat_sessions`, `chat_messages`, `user_preferences`, `event_embeddings`).

### Má»¥c tiÃªu há»c táº­p
- [ ] Äá»c tÃ i liá»‡u vá» PostgreSQL extension `pgvector` vÃ  cÃ¡ch tÃ­ch há»£p nÃ³ vá»›i Spring Data JPA.
- [ ] TÃ¬m hiá»ƒu vá» cÃ¡c thÆ° viá»‡n Java client cho Google AI Studio.

### CÃ¡c cuá»™c há»p vÃ  thá»i háº¡n
- KhÃ´ng cÃ³ cuá»™c há»p cá»‘ Ä‘á»‹nh.

## ğŸ“Š Tá»± Ä‘Ã¡nh giÃ¡

### NÄƒng suáº¥t
- **Äiá»ƒm**: 9.5/10
- **LÃ½ do**: HoÃ n thÃ nh xuáº¥t sáº¯c cÃ¡c má»¥c tiÃªu cuá»‘i cÃ¹ng cá»§a Page Service vÃ  chuáº©n bá»‹ bÃ¡o cÃ¡o tuáº§n.
- **CÃ¡ch cáº£i thiá»‡n**: CÃ³ thá»ƒ dÃ nh thÃªm thá»i gian Ä‘á»ƒ viáº¿t thÃªm test cases cho cÃ¡c trÆ°á»ng há»£p biÃªn.

### Há»c há»i
- **Äiá»ƒm**: 9/10
- **LÃ½ do**: Há»c Ä‘Æ°á»£c nhiá»u vá» Spring Kafka, Idempotency vÃ  Unit Testing Backend.
- **CÃ¡ch cáº£i thiá»‡n**: Thá»±c hÃ nh lÃ m viá»‡c vá»›i cÃ¡c há»‡ thá»‘ng phÃ¢n tÃ¡n.

### Há»£p tÃ¡c
- **Äiá»ƒm**: 8/10
- **LÃ½ do**: ÄÃ£ chuáº©n bá»‹ sáºµn sÃ ng bÃ¡o cÃ¡o tá»•ng káº¿t vÃ  má»™t Microservice Ä‘Ã£ hoÃ n thiá»‡n Ä‘á»ƒ chia sáº» vá»›i nhÃ³m.
- **CÃ¡ch cáº£i thiá»‡n**: Chá»§ Ä‘á»™ng chia sáº» cÃ¡c váº¥n Ä‘á» ká»¹ thuáº­t vÃ  giáº£i phÃ¡p vá»›i team.

### Má»©c Ä‘á»™ hÃ i lÃ²ng tá»•ng thá»ƒ
- **Äiá»ƒm**: 9.5/10
- **LÃ½ do**: Ráº¥t hÃ i lÃ²ng vá»›i viá»‡c Page Service Ä‘Ã£ hoÃ n táº¥t vÃ  sáºµn sÃ ng chuyá»ƒn sang AIChat Service.
- **CÃ¡ch cáº£i thiá»‡n**: Duy trÃ¬ tinh tháº§n phÃ¡t triá»ƒn liÃªn tá»¥c.

## ğŸ“ Tá»‡p Ä‘Ã­nh kÃ¨m & Link liÃªn káº¿t

### TÃ i nguyÃªn há»c táº­p
- [TÃ i liá»‡u Spring for Apache Kafka](https://docs.spring.io/spring-kafka/docs/current/reference/html/)
- [BÃ i viáº¿t vá» Idempotency trong Kafka](https://www.confluent.io/blog/kafka-consumer-applications-designing-for-scale-and-resilience/)

#### - Danh sÃ¡ch cÃ¡c video Ä‘Ã£ xem:
    - Video hÆ°á»›ng dáº«n triá»ƒn khai Kafka Consumer trong Spring Boot.
    - Video vá» Unit Testing vá»›i Mockito cho Spring Boot Services.

### Code & Dá»± Ã¡n
- [Link GitHub Page Service Repo (final state - placeholder)]

### TÃ i liá»‡u há»c táº­p
- [BÃ i viáº¿t vá» cÃ¡c patterns Testing trong Spring Boot](https://www.baeldung.com/spring-boot-testing)

### áº¢nh chá»¥p mÃ n hÃ¬nh & Báº£n demo
- [Screenshot cá»§a Kafka Consumer logs khi nháº­n message]
- [Screenshot káº¿t quáº£ Unit Tests]

---

**ğŸ“ Ghi chÃº quan trá»ng cho ngÃ y mai:**
ChÃ­nh thá»©c chuyá»ƒn trá»ng tÃ¢m sang AIChat Service. Cáº§n thiáº¿t láº­p mÃ´i trÆ°á»ng DB vÃ  cÃ¡c Entity ban Ä‘áº§u má»™t cÃ¡ch nhanh chÃ³ng.

**ğŸ¯ Tiáº¿n Ä‘á»™ so vá»›i má»¥c tiÃªu tuáº§n:**
**100%** (HoÃ n thÃ nh Page Service Backend)

---
_Worklog created by: LÆ° Hiáº¿u Trung_
_Next review: 01/12/2025_