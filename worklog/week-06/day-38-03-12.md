# Worklog - NgÃ y 03/12/2025

## ğŸ“… ThÃ´ng tin cÆ¡ báº£n

- **NgÃ y**: 03/12/2025
- **Thá»©**: Thá»© TÆ°
- **Tuáº§n thá»±c táº­p**: 6/8
- **Thá»i gian lÃ m viá»‡c**: 18:00 - 22:00
- **Mood**: ğŸ§  Táº­p trung vÃ o viá»‡c lÃ m cho AI "thÃ´ng minh" hÆ¡n vá»›i ngá»¯ cáº£nh.

## ğŸ¯ Má»¥c tiÃªu ngÃ y hÃ´m nay

- [x] HoÃ n thiá»‡n logic lÆ°u trá»¯ vÃ  cáº­p nháº­t `event_embeddings` vÃ o PostgreSQL.
- [x] Cáº¥u hÃ¬nh cÆ¡ cháº¿ commit offset thá»§ cÃ´ng cho Kafka Consumer Ä‘á»ƒ Ä‘áº£m báº£o tin nháº¯n khÃ´ng bá»‹ máº¥t.
- [x] Báº¯t Ä‘áº§u Ä‘iá»u chá»‰nh prompt cá»§a AI Ä‘á»ƒ sá»­ dá»¥ng ngá»¯ cáº£nh sá»± kiá»‡n khi tráº£ lá»i.

## ğŸ’¼ CÃ´ng viá»‡c Ä‘Ã£ thá»±c hiá»‡n

### 1. HoÃ n thiá»‡n logic lÆ°u trá»¯ vÃ  cáº­p nháº­t `event_embeddings` â±ï¸ 18:00 - 19:00

- **MÃ´ táº£**: ÄÃ£ hoÃ n thiá»‡n logic Ä‘á»ƒ lÆ°u trá»¯ thÃ´ng tin tÃ³m táº¯t cá»§a sá»± kiá»‡n (ID, tÃªn, mÃ´ táº£ ngáº¯n, ngÃ y, Ä‘á»‹a Ä‘iá»ƒm) vÃ o báº£ng `event_embeddings` trong PostgreSQL sau khi nháº­n Ä‘Æ°á»£c tá»« Kafka. Äáº£m báº£o ráº±ng má»—i sá»± kiá»‡n má»›i hoáº·c cáº­p nháº­t Ä‘á»u Ä‘Æ°á»£c xá»­ lÃ½ Ä‘Ãºng. Implement cÆ¡ cháº¿ `UPSERT` (update-or-insert) Ä‘á»ƒ trÃ¡nh trÃ¹ng láº·p dá»¯ liá»‡u.
- **Káº¿t quáº£**: Dá»¯ liá»‡u sá»± kiá»‡n Ä‘Ã£ Ä‘Æ°á»£c lÆ°u trá»¯ vÃ  cáº­p nháº­t thÃ nh cÃ´ng trong database cá»§a AIChat Service, táº¡o thÃ nh ngá»¯ cáº£nh cho AI.
- **Tools/Tech**: Spring Boot, JPA/Hibernate, PostgreSQL.

### 2. Cáº¥u hÃ¬nh cÆ¡ cháº¿ commit offset thá»§ cÃ´ng cho Kafka Consumer â±ï¸ 19:00 - 20:00

- **MÃ´ táº£**: ÄÃ£ chuyá»ƒn Kafka Consumer sang cháº¿ Ä‘á»™ commit offset thá»§ cÃ´ng (`ack-mode: MANUAL_IMMEDIATE`). Äáº£m báº£o ráº±ng `Acknowledgment.acknowledge()` Ä‘Æ°á»£c gá»i sau khi tin nháº¯n Ä‘Ã£ Ä‘Æ°á»£c xá»­ lÃ½ thÃ nh cÃ´ng (lÆ°u vÃ o DB). Äiá»u nÃ y giÃºp trÃ¡nh máº¥t tin nháº¯n khi service bá»‹ restart.
- **Káº¿t quáº£**: Kafka Consumer hoáº¡t Ä‘á»™ng Ä‘Ã¡ng tin cáº­y hÆ¡n, Ä‘áº£m báº£o má»i tin nháº¯n sá»± kiá»‡n Ä‘á»u Ä‘Æ°á»£c xá»­ lÃ½ Ã­t nháº¥t má»™t láº§n.
- **Tools/Tech**: Spring Kafka, Apache Kafka.

### 3. Báº¯t Ä‘áº§u Ä‘iá»u chá»‰nh prompt cá»§a AI Ä‘á»ƒ sá»­ dá»¥ng ngá»¯ cáº£nh sá»± kiá»‡n â±ï¸ 20:00 - 22:00

- **MÃ´ táº£**: ÄÃ£ sá»­a Ä‘á»•i prompt gá»­i Ä‘áº¿n Google AI Studio. Thay vÃ¬ chá»‰ gá»­i cÃ¢u há»i cá»§a ngÆ°á»i dÃ¹ng, bÃ¢y giá» prompt sáº½ bao gá»“m má»™t pháº§n "context" chá»©a thÃ´ng tin tÃ³m táº¯t vá» cÃ¡c sá»± kiá»‡n gáº§n Ä‘Ã¢y hoáº·c ná»•i báº­t (láº¥y tá»« báº£ng `event_embeddings`). Má»¥c tiÃªu lÃ  hÆ°á»›ng AI tráº£ lá»i cÃ¡c cÃ¢u há»i liÃªn quan Ä‘áº¿n sá»± kiá»‡n má»™t cÃ¡ch chÃ­nh xÃ¡c hÆ¡n.
- **Káº¿t quáº£**: AI Ä‘Ã£ báº¯t Ä‘áº§u sá»­ dá»¥ng ngá»¯ cáº£nh sá»± kiá»‡n khi tráº£ lá»i cÃ¡c cÃ¢u há»i, giÃºp pháº£n há»“i trá»Ÿ nÃªn há»¯u Ã­ch hÆ¡n.
- **Tools/Tech**: Google AI Studio API, Java/Kotlin, Prompt Engineering.

## ğŸ“š Kiáº¿n thá»©c há»c Ä‘Æ°á»£c

### ğŸ”§ Ká»¹ nÄƒng ká»¹ thuáº­t

- **JPA/Hibernate**: Thao tÃ¡c vá»›i cÆ¡ sá»Ÿ dá»¯ liá»‡u PostgreSQL.
- **Kafka Manual Offset Commit**: Quáº£n lÃ½ Ä‘á»™ bá»n cá»§a tin nháº¯n Kafka.
- **Context-Aware Prompt Engineering**: Thiáº¿t káº¿ prompt Ä‘á»ƒ AI hiá»ƒu vÃ  sá»­ dá»¥ng ngá»¯ cáº£nh.

### ğŸ’¡ KhÃ¡i niá»‡m vÃ  lÃ½ thuyáº¿t

- **At-Least-Once Delivery**: Äáº£m báº£o tin nháº¯n Kafka khÃ´ng bá»‹ máº¥t.
- **Retrieval Augmented Generation (RAG)**: Váº­n dá»¥ng kiáº¿n thá»©c tá»« nguá»“n ngoÃ i Ä‘á»ƒ tÄƒng cÆ°á»ng kháº£ nÄƒng cá»§a LLM (trong trÆ°á»ng há»£p nÃ y lÃ  `event_embeddings`).

### ğŸ¤ Soft Skills

- **Attention to Detail**: Quan trá»ng khi cáº¥u hÃ¬nh Kafka vÃ  thiáº¿t káº¿ prompt.
- **Iterative Development**: Tinh chá»‰nh prompt tá»«ng bÆ°á»›c Ä‘á»ƒ Ä‘áº¡t Ä‘Æ°á»£c káº¿t quáº£ mong muá»‘n.

## ğŸš§ KhÃ³ khÄƒn vÃ  giáº£i phÃ¡p

### Váº¥n Ä‘á» 1: Lá»—i máº¥t tin nháº¯n Kafka khi service restart

- **MÃ´ táº£**: Ban Ä‘áº§u, Kafka Consumer commit offset tá»± Ä‘á»™ng, dáº«n Ä‘áº¿n nguy cÆ¡ tin nháº¯n cÃ³ thá»ƒ Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»c nhÆ°ng chÆ°a Ä‘Æ°á»£c xá»­ lÃ½ xong khi service crash hoáº·c restart, gÃ¢y máº¥t dá»¯ liá»‡u.
- **áº¢nh hÆ°á»Ÿng**: AIChat Service cÃ³ thá»ƒ thiáº¿u ngá»¯ cáº£nh vá» má»™t sá»‘ sá»± kiá»‡n.
- **NguyÃªn nhÃ¢n gá»‘c rá»…**: Hiá»ƒu láº§m vá» `enable.auto.commit` vÃ  `auto.offset.reset`.
- **CÃ¡ch giáº£i quyáº¿t Ä‘Ã£ Ã¡p dá»¥ng**: Chuyá»ƒn sang `ack-mode: MANUAL_IMMEDIATE` vÃ  gá»i `Acknowledgment.acknowledge()` chá»‰ sau khi táº¥t cáº£ logic xá»­ lÃ½ tin nháº¯n (parse, lÆ°u vÃ o DB) Ä‘Ã£ hoÃ n táº¥t.
- **Káº¿t quáº£ sau khi giáº£i quyáº¿t**: Äáº£m báº£o tin nháº¯n Ä‘Æ°á»£c xá»­ lÃ½ Ã­t nháº¥t má»™t láº§n, ngÄƒn cháº·n máº¥t dá»¯ liá»‡u.
- **BÃ i há»c rÃºt ra**: Äá»‘i vá»›i cÃ¡c há»‡ thá»‘ng phÃ¢n tÃ¡n, cáº§n hiá»ƒu rÃµ cÃ¡c cÆ¡ cháº¿ Ä‘áº£m báº£o Ä‘á»™ bá»n vÃ  Ä‘á»™ tin cáº­y cá»§a tin nháº¯n.

### Váº¥n Ä‘á» 2: AI tráº£ lá»i khÃ´ng liÃªn quan dÃ¹ Ä‘Ã£ cÃ³ ngá»¯ cáº£nh

- **MÃ´ táº£**: Máº·c dÃ¹ Ä‘Ã£ thÃªm ngá»¯ cáº£nh sá»± kiá»‡n vÃ o prompt, AI váº«n Ä‘Ã´i khi tráº£ lá»i chung chung hoáº·c khÃ´ng sá»­ dá»¥ng thÃ´ng tin sá»± kiá»‡n má»™t cÃ¡ch hiá»‡u quáº£.
- **áº¢nh hÆ°á»Ÿng**: Cháº¥t lÆ°á»£ng pháº£n há»“i cá»§a AI khÃ´ng Ä‘áº¡t yÃªu cáº§u.
- **NguyÃªn nhÃ¢n gá»‘c rá»…**: Ngá»¯ cáº£nh Ä‘Æ°á»£c truyá»n chÆ°a Ä‘á»§ rÃµ rÃ ng hoáº·c quÃ¡ dÃ i, khiáº¿n AI bá»‹ "distract".
- **CÃ¡ch giáº£i quyáº¿t Ä‘Ã£ Ã¡p dá»¥ng**: ÄÃ£ thá»­ nghiá»‡m cÃ¡c cÃ¡ch khÃ¡c nhau Ä‘á»ƒ format ngá»¯ cáº£nh (vÃ­ dá»¥: gáº¡ch Ä‘áº§u dÃ²ng, Ä‘oáº¡n vÄƒn ngáº¯n). Giá»›i háº¡n sá»‘ lÆ°á»£ng sá»± kiá»‡n Ä‘Æ°á»£c Ä‘Æ°a vÃ o ngá»¯ cáº£nh Ä‘á»ƒ trÃ¡nh prompt quÃ¡ dÃ i. HÆ°á»›ng dáº«n AI trong prompt ráº±ng "hÃ£y tráº£ lá»i dá»±a trÃªn thÃ´ng tin sá»± kiá»‡n Ä‘Æ°á»£c cung cáº¥p".
- **Káº¿t quáº£ sau khi giáº£i quyáº¿t**: AI sá»­ dá»¥ng ngá»¯ cáº£nh hiá»‡u quáº£ hÆ¡n, nhÆ°ng váº«n cáº§n tinh chá»‰nh.
- **BÃ i há»c rÃºt ra**: Prompt engineering lÃ  má»™t nghá»‡ thuáº­t, cáº§n thá»­ nghiá»‡m vÃ  Ä‘iá»u chá»‰nh liÃªn tá»¥c.

## ğŸ’­ Suy ngáº«m & Nháº­n thá»©c

### HÃ´m nay cÃ³ gÃ¬ diá»…n ra tá»‘t Ä‘áº¹p?

- AIChat Service Ä‘Ã£ cÃ³ kháº£ nÄƒng lÆ°u trá»¯ ngá»¯ cáº£nh sá»± kiá»‡n vÃ  sá»­ dá»¥ng nÃ³ Ä‘á»ƒ cáº£i thiá»‡n pháº£n há»“i AI.
- Kafka Consumer hoáº¡t Ä‘á»™ng bá»n bá»‰ hÆ¡n vá»›i commit offset thá»§ cÃ´ng.

### Cáº§n cáº£i thiá»‡n Ä‘iá»u gÃ¬?

- Cáº§n xÃ¢y dá»±ng endpoint Ä‘á»ƒ AI gá»£i Ã½ sá»± kiá»‡n (`GET /api/v1/ai/recommend/events`).
- Cáº§n xá»­ lÃ½ cÃ¡c topic Kafka khÃ¡c (`event-registered`, `event-unregistered`).

### ThÃ´ng tin chi tiáº¿t chÃ­nh

- Káº¿t há»£p Kafka, PostgreSQL vÃ  Google AI Studio táº¡o thÃ nh má»™t há»‡ thá»‘ng AI máº¡nh máº½, cÃ³ ngá»¯ cáº£nh.
- Viá»‡c kiá»ƒm soÃ¡t offset trong Kafka lÃ  ráº¥t quan trá»ng cho tÃ­nh nháº¥t quÃ¡n dá»¯ liá»‡u.

### CÃ¢u há»i & Tháº¯c máº¯c

- LÃ m tháº¿ nÃ o Ä‘á»ƒ tá»± Ä‘á»™ng hÃ³a viá»‡c trÃ­ch xuáº¥t `vector embeddings` tá»« mÃ´ táº£ sá»± kiá»‡n Ä‘á»ƒ AI cÃ³ thá»ƒ thá»±c hiá»‡n tÃ¬m kiáº¿m ngá»¯ nghÄ©a tá»‘t hÆ¡n?
- CÃ³ best practices nÃ o Ä‘á»ƒ quáº£n lÃ½ prompt templates trong Spring Boot khÃ´ng?

## ğŸ“‹ Káº¿ hoáº¡ch ngÃ y mai

### Nhiá»‡m vá»¥ Æ°u tiÃªn

- [ ] **High**: PhÃ¡t triá»ƒn endpoint `GET /api/v1/ai/recommend/events`.
- [ ] **Medium**: Thiáº¿t káº¿ logic gá»£i Ã½ sá»± kiá»‡n dá»±a trÃªn `user_preferences` vÃ  `event_embeddings`.
- [ ] **Low**: ThÃªm cÃ¡c topic Kafka `event-registered` vÃ  `event-unregistered` cho Consumer.

### Má»¥c tiÃªu há»c táº­p

- [ ] Äá»c tÃ i liá»‡u vá» cÃ¡c thuáº­t toÃ¡n gá»£i Ã½ cÆ¡ báº£n.
- [ ] TÃ¬m hiá»ƒu vá» cÃ¡ch lÆ°u trá»¯ vÃ  truy váº¥n `vector embeddings` trong PostgreSQL.

### CÃ¡c cuá»™c há»p vÃ  thá»i háº¡n

- KhÃ´ng cÃ³ cuá»™c há»p cá»‘ Ä‘á»‹nh.

## ğŸ“Š Tá»± Ä‘Ã¡nh giÃ¡

### NÄƒng suáº¥t lÃ m viá»‡c

- **Äiá»ƒm sá»‘**: 9/10
- **LÃ½ do**: HoÃ n thÃ nh xuáº¥t sáº¯c cÃ¡c má»¥c tiÃªu vá» quáº£n lÃ½ ngá»¯ cáº£nh AI (Context Management) vÃ  tÄƒng cÆ°á»ng Ä‘á»™ bá»n vá»¯ng cho há»‡ thá»‘ng Kafka (Kafka Durability); Ä‘áº£m báº£o AIChat Service váº­n hÃ nh á»•n Ä‘á»‹nh vÃ  thÃ´ng minh hÆ¡n.
- **CÃ¡ch cáº£i thiá»‡n**: Láº­p káº¿ hoáº¡ch sá»›m hÆ¡n cho pháº§n phÃ¡t triá»ƒn logic gá»£i Ã½ sá»± kiá»‡n (Event Recommendation Logic) Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ triá»ƒn khai cÃ¡c tÃ­nh nÄƒng thÃ´ng minh.

### Há»c há»i

- **Äiá»ƒm sá»‘**: 9.5/10
- **Kiáº¿n thá»©c má»›i há»c Ä‘Æ°á»£c**:
  - NguyÃªn lÃ½ vÃ  cÃ¡ch triá»ƒn khai **RAG (Retrieval-Augmented Generation)** Ä‘á»ƒ cung cáº¥p dá»¯ liá»‡u thá»±c táº¿ cho AI.
  - Ká»¹ thuáº­t Ä‘áº£m báº£o tÃ­nh bá»n vá»¯ng vÃ  kháº£ nÄƒng phá»¥c há»“i cá»§a dá»¯ liá»‡u trong **Kafka**.
  - PhÆ°Æ¡ng phÃ¡p thiáº¿t káº¿ cÃ¢u lá»‡nh nÃ¢ng cao (**Advanced Prompt Engineering**) Ä‘á»ƒ tá»‘i Æ°u hÃ³a káº¿t quáº£ Ä‘áº§u ra cá»§a mÃ´ hÃ¬nh.
- **CÃ¡ch Ã¡p dá»¥ng**: Trá»±c tiáº¿p giÃºp AIChat Service cÃ³ kháº£ nÄƒng "hiá»ƒu" vÃ  "nhá»›" ngá»¯ cáº£nh cá»§a cÃ¡c sá»± kiá»‡n, tá»« Ä‘Ã³ Ä‘Æ°a ra nhá»¯ng pháº£n há»“i chÃ­nh xÃ¡c vÃ  cÃ¡ nhÃ¢n hÃ³a.
- **CÃ¡ch cáº£i thiá»‡n**: NghiÃªn cá»©u sÃ¢u hÆ¡n vá» cÃ¡c ká»¹ thuáº­t tÃ¬m kiáº¿m ngá»¯ nghÄ©a (**Semantic Search**) vÃ  Vector Database Ä‘á»ƒ nÃ¢ng cáº¥p Ä‘á»™ chÃ­nh xÃ¡c cho há»‡ thá»‘ng RAG.

### LÃ m viá»‡c nhÃ³m

- **Äiá»ƒm sá»‘**: 8/10
- **TÆ°Æ¡ng tÃ¡c**: Chá»§ Ä‘á»™ng chia sáº» cÃ¡c káº¿t quáº£ thá»­ nghiá»‡m Prompt thá»±c táº¿ vá»›i Ä‘á»™i ngÅ© Ä‘á»ƒ cÃ¹ng Ä‘Ã¡nh giÃ¡ vÃ  tinh chá»‰nh cháº¥t lÆ°á»£ng pháº£n há»“i cá»§a AI.
- **ÄÃ³ng gÃ³p**: XÃ¢y dá»±ng ná»n táº£ng tri thá»©c chung vá» AI cho nhÃ³m, giÃºp má»i ngÆ°á»i hiá»ƒu rÃµ hÆ¡n vá» kháº£ nÄƒng vÃ  giá»›i háº¡n cá»§a mÃ´ hÃ¬nh hiá»‡n táº¡i.
- **CÃ¡ch cáº£i thiá»‡n**: Chá»§ Ä‘á»™ng tham váº¥n Ã½ kiáº¿n tá»« Mentor vá» cÃ¡c ká»¹ thuáº­t RAG tá»‘i Æ°u Ä‘á»ƒ rÃºt ngáº¯n thá»i gian thá»­ nghiá»‡m vÃ  sai sÃ³t (Trial and error).

### Má»©c Ä‘á»™ hÃ i lÃ²ng tá»•ng thá»ƒ

- **Äiá»ƒm sá»‘**: 9/10
- **Äiá»ƒm ná»•i báº­t**: Ráº¥t hÃ i lÃ²ng khi AIChat Service Ä‘Ã£ Ä‘áº¡t tá»›i ngÆ°á»¡ng "hiá»ƒu ngá»¯ cáº£nh", mang láº¡i tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng tá»± nhiÃªn vÃ  giÃ¡ trá»‹ hÆ¡n háº³n.
- **LÄ©nh vá»±c cáº§n cáº£i thiá»‡n**: Tiáº¿p tá»¥c duy trÃ¬ sá»± táº­p trung cao Ä‘á»™ Ä‘á»ƒ hoÃ n thiá»‡n cÃ¡c tÃ­nh nÄƒng gá»£i Ã½ thÃ´ng minh cÃ²n láº¡i, Ä‘Æ°a AIChat trá»Ÿ thÃ nh trá»£ lÃ½ thá»±c thá»¥.

## ğŸ“ Tá»‡p Ä‘Ã­nh kÃ¨m & Link liÃªn káº¿t

### TÃ i nguyÃªn há»c táº­p

- [Kafka Manual Offset Commit Example](https://www.baeldung.com/spring-kafka-commit-offset)
- [Retrieval Augmented Generation (RAG)](https://www.promptingguide.ai/techniques/rag)

### TÃ i liá»‡u há»c táº­p

- [BÃ i viáº¿t vá» cÃ¡c cÃ¡ch format prompt cho LLMs](https://www.promptingguide.ai/introduction)

---

**ğŸ“ Ghi chÃº quan trá»ng cho ngÃ y mai:**
Táº­p trung vÃ o tÃ­nh nÄƒng gá»£i Ã½ sá»± kiá»‡n vÃ  má»Ÿ rá»™ng Kafka Consumer.

**ğŸ¯ Tiáº¿n Ä‘á»™ so vá»›i má»¥c tiÃªu tuáº§n:**
**60%** (Contextual AI & Kafka durability implemented)

---

_Worklog created by: LÆ° Hiáº¿u Trung_  
_Next review: 04/12/2025_
